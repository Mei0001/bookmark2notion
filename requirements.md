# 要件定義書

## 概要

このプロジェクトは、複数のソーシャルメディアプラットフォーム（X、Instagram、Facebook、note、Qiita、Zenn等）からのいいね、スター、リアクション数を統合して表示する単一のインターフェースを提供します。ユーザーは一つのbashスクリプトを実行するだけで、すべてのプラットフォームからのエンゲージメント情報を一覧で確認できます。

## 要件

### 要件1

**ユーザーストーリー:** コンテンツクリエイターとして、すべてのソーシャルメディアのエンゲージメント指標を一箇所で確認したい。そうすることで、プラットフォーム横断でのコンテンツパフォーマンスを素早く評価できる。

#### 受け入れ基準

1. bashスクリプトが実行されたとき、システムは設定されたすべてのプラットフォームからのエンゲージメント指標を表示する
2. 指標を表示するとき、システムはプラットフォーム名、コンテンツタイトル/URL、エンゲージメント数を各項目について表示する
3. エンゲージメントデータが利用できないとき、システムはデータが見つからないことを示す適切なメッセージを表示する

### 要件2

**ユーザーストーリー:** ユーザーとして、ソーシャルメディアアカウントを一度設定したい。そうすることで、認証情報を再入力することなく繰り返しエンゲージメント指標を確認できる。

#### 受け入れ基準

1. スクリプトが初回実行されたとき、システムは必要なAPIキーと認証トークンの入力を求める
2. 認証情報が提供されたとき、システムは将来の使用のためにこの情報を安全に保存する
3. 保存された認証情報が無効な場合、システムはユーザーに認証情報の更新を求める

### 要件3

**ユーザーストーリー:** ユーザーとして、X、note、Qiita、Zennを含む複数のプラットフォームからのエンゲージメントデータを確認したい。そうすることで、コンテンツパフォーマンスの包括的な視点を得られる。

#### 受け入れ基準

1. データを取得するとき、システムはX APIからいいね/ブックマークを取得する
2. データを取得するとき、システムはnoteプラットフォームからいいね・ブックマークを取得する
3. データを取得するとき、システムはQiitaからLGTM数・ブックマークを取得する
4. データを取得するとき、システムはZennからいいね・ブックマークを取得する
5. プラットフォームが利用できないとき、システムは他のプラットフォームの処理を継続し、利用できないプラットフォームについてエラーメッセージを表示する

### 要件4

**ユーザーストーリー:** ユーザーとして、出力が明確にフォーマットされ読みやすいものであってほしい。そうすることで、エンゲージメント指標を素早く理解できる。

#### 受け入れ基準

1. 結果を表示するとき、システムは読みやすいテーブルまたはリスト形式で出力をフォーマットする
2. 結果を表示するとき、システムは結果をプラットフォーム別にグループ化する
3. 結果を表示するとき、システムはすべてのプラットフォーム横断での総エンゲージメント数を表示する
4. 結果を表示するとき、システムは結果をエンゲージメント数の降順でソートする

### 要件5

**ユーザーストーリー:** ユーザーとして、スクリプトがエラーを適切に処理してほしい。そうすることで、一時的な問題が利用可能なデータの確認を妨げることがない。

#### 受け入れ基準

1. APIリクエストが失敗したとき、システムはエラーメッセージを表示し、他のプラットフォームの処理を継続する
2. ネットワーク接続が不安定なとき、システムは指数バックオフによるリトライロジックを実装する
3. レート制限を超過したとき、システムは適切な警告メッセージを表示する
4. スクリプトが予期しないエラーに遭遇したとき、システムはエラー詳細をログに記録し、可能な限り実行を継続する

### 要件6

**ユーザーストーリー:** ユーザーとして、エンゲージメントデータをNotionデータベースに自動的に保存したい。そうすることで、履歴を追跡し、各記事の詳細情報を構造化して管理できる。

#### 受け入れ基準

1. データを取得したとき、システムは指定されたNotionデータベースに各記事の情報を保存する
2. Notionに保存するとき、システムは各記事を個別のページとして作成する
3. 各ページには、プラットフォーム名、記事タイトル、URL、エンゲージメント数、取得日時を含める
4. 既存の記事が存在する場合、システムはエンゲージメント数を更新する
5. Notion APIが利用できない場合、システムはローカルに結果を表示し、エラーメッセージを表示する

### 要件7

**ユーザーストーリー:** ユーザーとして、これを単一のbashファイルとして実行したい。そうすることで、複雑なセットアップや依存関係なしに簡単に実行できる。

#### 受け入れ基準

1. スクリプトを実行するとき、システムは標準的なUnixツール以外の外部依存関係なしに単一のbashファイルとして動作する
2. スクリプトが実行されるとき、システムはUnix/Linuxシステムで一般的に利用可能なツール（curl、jq等）のみを使用する
3. スクリプトが追加のツールを必要とするとき、システムはそれらの可用性をチェックし、不足している場合は明確なインストール手順を提供する